<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"/></script>
<script> gitbook.events.bind("page.change", function() { MathJax.Hub.Queue(["Typeset",MathJax.Hub]); } </script>

# BashGame - 巴什博弈

--------

#### 问题

$$ A $$和$$ B $$两人轮流从$$ n $$个物品中取出物品，每次取的物品数限定为$$ [1, m] $$（至少取$$ 1 $$个，至多取$$ m $$个。$$ n, m $$都是正整数且$$ m \lt n $$，显然若$$ m \ge n $$则第一个取的人一次就可以把所有物品取走从而获胜）个，最后一个把物品取光的人获胜。

求给定$$ n $$和$$ m $$，$$ A $$先手$$ B $$后手，且两人都是高手（在能赢的情况下一定能赢），最终谁获胜。

巴什博弈还可以描述为：$$ A $$和$$ B $$两人轮流向一个篮子中放入物品，篮子最多能放$$ n $$个物品。每次放的物品数量限定为$$ [1, m] $$，最后一个把篮子填满的人获胜。

上面两个问题其实是相同的，只是放和取的过程相反。本章中其他的博弈问题都可以像这样用相反的过程进行颠倒。

#### 解法

若$$ n = m + 1 $$，$$ A $$取$$ [1, m] $$个物品，剩下$$ [1, m] $$个物品。下一次$$ B $$总能一次取光，$$ B $$获胜。

可以看出，当留给对方$$ m + 1 $$个物品时，下一轮对方必然会输，因为对方必然取$$ [1, m] $$个物品，留给我方$$ [1, m] $$个物品。称这样的物品数量为必赢数量$$ w = m + 1 $$。

比如对于$$ n = 50, m = 4, w = 5 $$，当我方留给对方$$ 5 $$个物品，对方必然取$$ [1, 4] $$个物品，留给我方$$ [1, 4] $$个物品，我方必赢。当我方留给对方$$ 5 \times 2 $$个物品，对方取完后必然留给我方$$ [6, 9] $$个物品，我方只要取$$ [1, 4] $$个物品，则仍然可以留给对方$$ 5 $$个物品，我方必赢。

可以发现，只要我方留给对方$$ w $$的倍数个物品时，我方必赢。

当$$ A $$和$$ B $$都是高手且$ A $$先手时，$$ n \mod (m + 1) = 0 $$则$$ A $$必赢，否则$$ B $$必赢。

该算法的时间复杂度为$$ O(1) $$。

--------

#### 源码

[import, lang:"c_cpp"](../../../../src/GameTheory/BashGame.h)

#### 测试

[import, lang:"c_cpp"](../../../../src/GameTheory/BashGame.cpp)
